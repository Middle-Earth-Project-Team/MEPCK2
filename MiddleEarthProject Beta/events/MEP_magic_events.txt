#ID Ranges:
#0-9 Trait determination
#100-199 caster cooldown events
#1000-1999 target cooldown events

namespace = magic

#set caster levels based on age
#
character_event = {
	id = magic.1
	title = EVTNAMEmagic.1
	desc = EVTDESCmagic.1
	picture = GFX_evt_elves
	
	#hide_window = yes

	mean_time_to_happen = { 
		days = 1
	} 
	
	trigger = {
		age = 1000
		NOT = {
			trait = caster1
			trait = caster2
			trait = caster3
			trait = caster4
		}
	}
	
	option = {
		name = EVTOPTAmagic.1
		add_trait = caster1
	}
}

character_event = {
	id = magic.2
	title = EVTNAMEmagic.2
	desc = EVTDESCmagic.2
	picture = GFX_evt_elves
	
	#hide_window = yes

	mean_time_to_happen = { 
		days = 1
	} 
	
	trigger = {
		age = 2000
		trait = caster1
	}
	
	option = {
		name = EVTOPTAmagic.2
		add_trait = caster2
		remove_trait = caster1
	}
}

character_event = {
	id = magic.3
	title = EVTNAMEmagic.3
	desc = EVTDESCmagic.3
	picture = GFX_evt_elves
	
	#hide_window = yes

	mean_time_to_happen = { 
		days = 1
	} 
	
	trigger = {
		age = 3000
		trait = caster2
	}
	
	option = {
		name = EVTOPTAmagic.3
		add_trait = caster3
		remove_trait = caster2
	}
}

character_event = {
	id = magic.4
	title = EVTNAMEmagic.4
	desc = EVTDESCmagic.4
	picture = GFX_evt_elves
	
	#hide_window = yes

	mean_time_to_happen = { 
		days = 1
	} 
	
	trigger = {
		#DEBUG
		age = 30000
		trait = caster3
	}
	
	option = {
		name = EVTOPTAmagic.4
		add_trait = caster4
		remove_trait = caster3
	}
}
#call this after a succesful cast to give some chance of level gain
character_event = {
	id = magic.10
	desc = OK
	is_triggered_only = yes
	hide_window = yes
	option = {
		random = {
			chance = 10
			character_event = { id = magic.11 }
		}
	}
}

character_event = {
	id = magic.11
	title = EVTNAMEmagic.11
	desc = EVTDESCmagic.11
	picture = GFX_evt_elves
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTAmagic.11
		if = {
			limit = {
				NOT = {
					trait = caster1
					trait = caster2
					trait = caster3
				}
			}
			break = yes
		}
		if = {
			limit = {
				trait = caster1
			}
			add_trait = caster2
			remove_trait = caster1
			break = yes
		}
		if = {
			limit = {
				trait = caster2
			}
			add_trait = caster3
			remove_trait = caster2
			break = yes
		}
		if = {
			limit = {
				trait = caster3
			}
			add_trait = caster4
			remove_trait = caster3
			break = yes
		}
	}
}

#cooldown resets
#clear cooldown
character_event = {
	id = magic.100
	desc = OK
	hide_window = yes
	is_triggered_only = yes
	option = {
		clr_character_flag = spell_cast1
	}
}

#start lvl1 cooldown
character_event = {
	id = magic.101
	desc = OK
	hide_window = yes
	is_triggered_only = yes
	option = {
		set_character_flag = spell_cast1
		clr_character_flag = spell_cast2
		character_event = {
			id = magic.100
			days = 30
		}
	}
}

#start lvl2 cooldown
character_event = {
	id = magic.102
	desc = OK
	hide_window = yes
	is_triggered_only = yes
	option = {
		set_character_flag = spell_cast2
		clr_character_flag = spell_cast3
		character_event = {
			id = magic.101
			days = 30
		}
	}
}

#start lvl3 cooldown
character_event = {
	id = magic.103
	desc = OK
	hide_window = yes
	is_triggered_only = yes
	option = {
		set_character_flag = spell_cast3
		clr_character_flag = spell_cast4
		character_event = {
			id = magic.102
			days = 30
		}
	}
}

#start lvl4 cooldown
character_event = {
	id = magic.104
	desc = OK
	hide_window = yes
	is_triggered_only = yes
	option = {
		set_character_flag = spell_cast4
		character_event = {
			id = magic.103
			days = 30
		}
	}
}

#clear enchantment_target
character_event = {
	id = magic.1000
	desc = OK
	hide_window = yes
	is_triggered_only = yes
	option = {
		clr_character_flag = enchantment_target
	}
}
#ID = 1000+i => set target cooldown for i months 
#start target cooldown for 1 month
character_event = {
	id = magic.1001
	desc = OK
	hide_window = yes
	is_triggered_only = yes
	option = {
		set_character_flag = enchantment_target
		character_event = {
			id = magic.1000
			days = 30
		}
	}
}

#start target cooldown for 2 months
character_event = {
	id = magic.1002
	desc = OK
	hide_window = yes
	is_triggered_only = yes
	option = {
		set_character_flag = enchantment_target
		character_event = {
			id = magic.1000
			days = 61
		}
	}
}

#start target cooldown for 3 months
character_event = {
	id = magic.1003
	desc = OK
	hide_window = yes
	is_triggered_only = yes
	option = {
		set_character_flag = enchantment_target
		character_event = {
			id = magic.1000
			days = 92
		}
	}
}

#start target cooldown for 6 months
character_event = {
	id = magic.1006
	desc = OK
	hide_window = yes
	is_triggered_only = yes
	option = {
		set_character_flag = enchantment_target
		character_event = {
			id = magic.1000
			days = 183
		}
	}
}

#start target cooldown for 12 months
character_event = {
	id = magic.1012
	desc = OK
	hide_window = yes
	is_triggered_only = yes
	option = {
		set_character_flag = enchantment_target
		character_event = {
			id = magic.1000
			days = 365
		}
	}
}